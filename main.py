
food_combinations = {
    ("meat", "mushroom"): "Meat and Mushroom Skewer",
    ("fish", "mushroom"): "Fish and Mushroom Skewer",
    ("fruit", "plant"): "Steamed Fruit",
    ("hylian tomatoes", "plant"): "Steamed Tomatoes",
    ("mushroom", "plant"): "Steamed Mushrooms",
    ("meat", "plant"): "Steamed Meat",
    ("fish", "plant"): "Steamed Fish",
    ("spicy peppers",): "Spicy Sauteed Peppers",
    ("nut",): "Sauteed Nuts",
    ("plant",): "Fried Wild Greens",
    ("stambulb",): "Cooked Stambulb",
    ("stambulb", "goat butter"): "Buttered Stambulb",
    ("meat", "goron spice"): "Spiced Meat Skewer",
    ("prime meat", "goron spice"): "Prime Spiced Meat Skewer",
    ("gourmet meat", "goron spice"): "Gourmet Spiced Meat Skewer",
    ("crab", "goron spice"): "Crab Stir-Fry",
    ("seafood", "meat"): "Meat and Seafood Fry",
    ("seafood", "prime meat"): "Prime Meat and Seafood Fry",
    ("seafood", "gourmet meat"): "Gourmet Meat and Seafood Fry",
    ("plant", "rock salt"): "Salt-Grilled Greens",
    ("mushroom", "rock salt"): "Salt-Grilled Mushrooms",
    ("meat", "rock salt"): "Salt-Grilled Meat",
    ("prime meat", "rock salt"): "Salt-Grilled Prime Meat",
    ("gourmet meat", "rock salt"): "Salt-Grilled Prime Meat",
    ("fish", "rock salt"): "Salt-Grilled Fish",
    ("crab", "rock salt"): "Salt-Grilled Crab",
    ("plant", "goron spice"): "Herb Saute",
    ("mushroom", "goron spice"): "Fragrant Mushroom Saute",
    ("meat", "spicy pepper"): "Pepper Steak",
    ("seafood", "spicy pepper"): "Pepper Seafood",
    ("fish", "oil jar", "stambulb"): "Fragrant Seafood Stew",
    ("raw bird", "drumstick", "oil jar"): "Deep-Fried Drumstick",
    ("raw bird", "thigh", "oil jar"): "Deep-Fried Thigh",
    ("raw whole bird", "oil jar"): "Deep-Fried Bird Roast",
    ("seafood", "tabantha wheat", "goat butter"): "Seafood Meuniere",
    ("porgy", "tabantha wheat", "goat butter"): "Porgy Meuniere",
    ("salmon", "tabantha wheat", "goat butter"): "Salmon Meuniere",
    ("fruit", "mushroom"): "Fruit and Mushroom Mix",
    ("hylian tomato",): "Simmered Tomato",
    ("hylian tomato", "fresh milk", "rock salt"): "Fruity Tomato Stew",
    ("mushroom", "hylian tomato"): "Tomato Mushroom Stew",
    ("seafood", "hylian tomato"): "Tomato Seafood Stew",
    ("plant", "rock salt", "fresh milk"): "Cream of Vegetable Soup",
    ("vegetable", "rock salt", "fresh milk"): "Veggie Cream Soup",
    ("mushroom", "rock salt", "fresh milk"): "Cream of Mushroom Soup",
    ("meat", "plant", "rock salt", "fresh milk"): "Creamy Meat Soup",
    ("seafood", "plant", "rock salt", "fresh milk"): "Creamy Seafood Soup",
    ("hearty blueshell snail", "goat butter", "tabantha wheat", "fresh milk"): "Snail Chowder",
    ("radish", "hydromelon", "voltfruit", "fresh milk"): "Creamy Heart Soup",
    ("plant", "courser bee honey"): "Glazed Veggies",
    ("mushroom", "courser bee honey"): "Glazed Mushrooms",
    ("meat", "courser bee honey"): "Glazed Meat",
    ("hylian rice", "goron spice"): "Curry Rice",
    ("hylian rice", "goron spice", "vegetable"): "Vegetable Curry",
    ("hylian rice", "goron spice", "meat"): "Meat Curry",
    ("hylian rice", "goron spice", "prime meat"): "Prime Meat Curry",
    ("hylian rice", "goron spice", "gourmet meat"): "Gourmet Meat Curry",
    ("hylian rice", "goron spice", "raw bird drumstick"): "Poultry Curry",
    ("hylian rice", "goron spice", "raw bird thigh"): "Prime Poultry Curry",
    ("hylian rice", "goron spice", "raw whole bird"): "Gourmet Poultry Curry",
    ("hylian rice", "goron spice", "porgy"): "Seafood Curry",
    ("hylian rice", "goron spice", "hateno cheese"): "Cheesy Curry",
    ("any carrot", "goat butter", "fresh milk", "tabantha wheat"): "Carrot Stew",
    ("fortified pumpkin", "goat butter", "fresh milk", "tabantha wheat"): "Pumpkin Stew",
    ("meat", "goat butter", "fresh milk", "tabantha wheat"): "Meat Stew",
    ("prime meat", "goat butter", "fresh milk", "tabantha wheat"): "Prime Meat Stew",
    ("gourmet meat", "goat butter", "fresh milk", "tabantha wheat"): "Gourmet Meat Stew",
    ("fortified pumpkin", "meat"): "Fortified Meat-Stuffed Pumpkin",
    ("vegetable", "hylian rice", "goat butter", "rock salt"): "Vegetable Risotto",
    ("mushroom", "hylian rice", "goat butter", "rock salt"): "Mushroom Risotto",
    ("salmon", "hylian rice", "goat butter", "rock salt"): "Salmon Risotto",
    ("crab", "hylian rice", "goat butter", "rock salt"): "Crab Risotto",
    ("mushroom", "hylian rice", "goat butter", "hateno cheese", "rock salt"): "Cheesy Risotto",
    ("raw bird drumstick", "hylian rice", "goat butter", "bird egg"): "Poultry Pilaf",
    ("raw bird thigh", "hylian rice", "goat butter", "bird egg"): "Prime Poultry Pilaf",
    ("raw whole bird", "hylian rice", "goat butter", "bird egg"): "Gourmet Poultry Pilaf",
    ("mighty porgy", "iron shell crab", "hylian rice", "goat butter", "rock salt"): "Seafood Paella",
    ("hylian rice", "goat butter", "goron spice"): "Curry Pilaf",
    ("hylian rice", "bird egg"): "Fried Egg and Rice",
    ("meat", "hylian rice", "oil jar", "bird egg"): "Crunchy Fried Rice",
    ("porgy", "hylian rice", "rock salt"): "Seafood Fried Rice",
    ("crab", "bird egg", "hylian rice", "rock salt"): "Crab Omelet with Rice",
    ("meat", "hylian rice", "rock salt"): "Meat and Rice Bowl",
    ("prime meat", "hylian rice", "rock salt"): "Prime Meat and Rice Bowl",
    ("gourmet meat", "hylian rice", "rock salt"): "Gourmet Meat and Rice Bowl",
    ("meat", "hateno cheese", "hylian rice", "rock salt"): "Cheesy Meat Bowl",
    ("prime meat", "hateno cheese", "hylian rice", "rock salt"): "Prime Cheesy Meat Bowl",
    ("gourmet meat", "hateno cheese", "hylian rice", "rock salt"): "Gourmet Cheesy Meat Bowl",
    ("plant", "hylian rice"): "Veggie Rice Balls",
    ("mushroom", "hylian rice"): "Mushroom Rice Balls",
    ("meat", "hylian rice"): "Meaty Rice Balls",
    ("seafood", "hylian rice"): "Seafood Rice Balls",
    ("plant", "bird egg", "hylian rice", "fresh milk"): "Veggie Porridge",
    ("tabantha wheat", "rock salt"): "Wheat Bread",
    ("tabantha wheat", "rock salt", "hateno cheese"): "Melty Cheesy Bread",
    ("tabantha wheat", "rock salt", "hylian tomato", "hateno cheese"): "Hylian Tomato Pizza",
    ("meat", "goat butter", "tabantha wheat", "rock salt"): "Meat Pie",
    ("seafood", "goat butter", "tabantha wheat", "rock salt"): "Fish Pie",
    ("hylian tomato", "hateno cheese"): "Cheesy Tomato",
    ("seafood", "hateno cheese"): "Cheesy Baked Fish",
    ("bird egg",): "Omelet",
    ("plant", "bird egg", "goat butter", "rock salt"): "Vegetable Omelet",
    ("mushroom", "bird egg", "goat butter", "rock salt"): "Mushroom Omelet",
    ("mushroom", "bird egg", "goat butter", "hateno cheese", "rock salt"): "Cheesy Omelet",
    ("apple", "goat butter"): "Hot Buttered Apple",
    ("fruit", "courser bee honey"): "Honeyed Fruits",
    ("courser bee honey",): "Energising Honey Candy",
    ("mighty banana", "tabantha wheat", "cane sugar"): "Fried Bananas",
    ("bird egg", "fresh milk", "cane sugar"): "Egg Pudding",
    ("tabantha wheat", "bird egg", "fresh milk", "cane sugar"): "Plain Crepe",
    ("wildberry", "tabantha wheat", "bird egg", "fresh milk", "cane sugar"): "Wildberry Crepe",
    ("courser bee honey", "tabantha wheat", "bird egg", "fresh milk", "cane sugar"): "Honey Crepe",
    ("nut", "tabantha wheat", "cane sugar", "goat butter"): "Nutcake",
    ("fruit", "tabantha wheat", "cane sugar"): "Fruitcake",
    ("any carrot", "tabantha wheat", "cane sugar"): "Carrot Cake",
    ("fortified pumpkin", "goat butter", "tabantha wheat", "cane sugar"): "Pumpkin Pie",
    ("hateno cheese", "goat butter", "tabantha wheat", "cane sugar"): "Fruitcake",
    ("fruit", "goat butter", "tabantha wheat", "cane sugar"): "Fruit Pie",
    ("apple", "goat butter", "tabantha wheat", "cane sugar"): "Apple Pie",
    ("bird egg", "goat butter", "tabantha wheat", "cane sugar"): "Egg Tart",
    ("palm fruit", "hydromelon", "voltfruit", "rock salt"): "Noble Pursuit",
    ("monster extract", "meat", "seafood"): "Monster Stew",
    ("monster extract", "goat butter", "fresh milk", "tabantha wheat"): "Monster Stew",
    ("monster extract", "hylian rice", "goron spice"): "Monster Curry",
    ("monster extract", "hylian rice", "rock salt"): "Monster Rice Balls",
    ("monster extract", "cane sugar", "goat butter", "tabantha wheat"): "Monster Cake",
    ("dark clump", "meat", "seafood"): "Dark Stew",
    ("dark clump", "goat butter", "fresh milk", "tabantha wheat"): "Dark Stew",
    ("dark clump", "hylian rice", "goron spice"): "Dark Curry",
    ("dark clump", "hylian rice", "rock salt"): "Dark Rice Ball",
}

buff_modifiers = {
    "endura shroom": "Enduring",
    "stamella shroom": "Enduring",
    "hearty truffle": "Hearty",
    "big hearty truffle": "Hearty",
    "chillshroom": "Chilly",
    "sunshroom": "Sunny",
    "zapshroom": "Electro",
    "rushroom": "Speedy",
    "ironshroom": "Mighty",
    "silent shroom": "Sneaky",
}

#variations in food combos
variations_in_recipe = {
    ("meat", "mushroom"): "Meat and Mushroom Skewer",
    ("meat", "hylian shroom"): "Meat and Mushroom Skewer",
    ("meat", "stamella shroom"): "Meat and Mushroom Skewer",
    ("meat", "hearty truffle"): "Meat and Mushroom Skewer",
    ("meat", "big hearty truffle"): "Meat and Mushroom Skewer",
    ("meat", "chillshroom"): "Meat and Mushroom Skewer",
    ("meat", "sunshroom"): "Meat and Mushroom Skewer",
    ("meat", "zapshroom"): "Meat and Mushroom Skewer",
    ("meat", "rushroom"): "Meat and Mushroom Skewer",
    ("meat", "ironshroom"): "Meat and Mushroom Skewer",
    ("meat", "silent shroom"): "Meat and Mushroom Skewer",
    ("fish", "mushroom"): "Fish and Mushroom Skewer",
    ("fish", "hylian shroom"): "Fish and Mushroom Skewer",
    ("fish", "endura shroom"): "Fish and Mushroom Skewer",
    ("fish", "stamella shroom"): "Fish and Mushroom Skewer",
    ("fish", "hearty truffle"): "Fish and Mushroom Skewer",
    ("fish", "big hearty truffle"): "Fish and Mushroom Skewer",
    ("fish", "chillshroom"): "Fish and Mushroom Skewer",
    ("fish", "sunshroom"): "Fish and Mushroom Skewer",
    ("fish", "zapshroom"): "Fish and Mushroom Skewer",
    ("fish", "rushroom"): "Fish and Mushroom Skewer",
    ("fish", "ironshroom"): "Fish and Mushroom Skewer",
    ("fish", "silent shroom"): "Fish and Mushroom Skewer",
    ("fruit", "mushroom"): "Fruit and Mushroom Mix",
    ("fruit", "hylian shroom"): "Fruit and Mushroom Mix",
    ("fruit", "endura shroom"): "Fruit and Mushroom Mix",
    ("fruit", "stamella shroom"): "Fruit and Mushroom Mix",
    ("fruit", "hearty truffle"): "Fruit and Mushroom Mix",
    ("fruit", "big hearty truffle"): "Fruit and Mushroom Mix",
    ("fruit", "chillshroom"): "Fruit and Mushroom Mix",
    ("fruit", "sunshroom"): "Fruit and Mushroom Mix",
    ("fruit", "zapshroom"): "Fruit and Mushroom Mix",
    ("fruit", "rushroom"): "Fruit and Mushroom Mix",
    ("fruit", "ironshroom"): "Fruit and Mushroom Mix",
    ("fruit", "silent shroom"): "Fruit and Mushroom Mix"
}

from itertools import combinations
from itertools import permutations

# Generate permutations of food items and store them in a list
new_combinations = []
for combo in food_combinations.keys():
    for perm in permutations(combo):
        new_combinations.append((perm, food_combinations[combo]))

# Add the new combinations to the food_combinations dictionary
for perm, value in new_combinations:
    food_combinations[perm] = value

#Calculate the number of hearts based on the recipe
def calculate_hearts(items):
    total_hearts = 0
    
    # Check each item in the recipe
    for item in items:
        # Check if the item is meat or big hearty truffle
        if item == 'meat':
            total_hearts += 2
        # Return Full Recovery if big hearty truffle is present
        elif item == 'big hearty truffle':
            return 'Full Recovery'  
        # All other items contribute 1 heart
        else:
            total_hearts += 1  
    
    return total_hearts

def combine_food(items):
    print("Entered items:", items)

    # Check if any of the items give Link buffs (powers) that should modify the result
    modifiers = [buff_modifiers[item] for item in items if item in buff_modifiers]
    
    # Concatenate modifiers
    modifier_str = ' '.join(modifiers) + ' ' if modifiers else ''  

    # Generate all possible subsets of items
    for r in range(1, len(items) + 1):
        for combo in combinations(items, r):
            print("Checking combination:", combo)
            sorted_combo = tuple(sorted(combo))
            if sorted_combo in food_combinations:
                print("Combination match found:", combo)
                return modifier_str + food_combinations[sorted_combo]
            # Check for variations in recipe
            elif sorted_combo in variations_in_recipe:  
                print("Variation match found:", combo)
                return modifier_str + variations_in_recipe[sorted_combo]
            
    # If no matching combination is found, return "Dubious Food"
    return "Ew, you've made Dubious Food! Not sure if you should eat that :("

def main():
    print('Welcome to the Zelda Food Combiner!')
    print('Enter food items (separated by commas) to see what you get!')

    while True:
        user_input = input("Type 'quit' to exit:").strip().split(',')
        
        if user_input[0].strip().lower() == 'quit':
            print("Goodbye!")
            break

        user_input = [item.strip() for item in user_input if item.strip()]
            
        if len(user_input) < 1 or len(user_input) > 6:
            print('Please enter between 1 and 6 items.')
            continue
            
        result = combine_food(user_input)
        hearts = calculate_hearts(user_input)
        print('Result:', result)
        print('Hearts:', hearts)

if __name__ == "__main__":
    main()

